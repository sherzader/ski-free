<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Ski Free</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,
      user-scalable=no">
    <link href='https://fonts.googleapis.com/css?family=VT323' rel='stylesheet'
      type='text/css'>
    <script src="./lib/mogul.js"></script>
    <script src="./lib/tree.js"></script>
    <script src="./lib/skier.js"></script>
    <script src="./lib/yeti.js"></script>
    <script src="./lib/game.js"></script>
    <script src="./lib/gameView.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/game-style.css">
  </head>

  <body>
    <div class="container">
      <aside><img src="./assets/yeti.jpg" class="yeti-img" alt="" /></aside>
      <main>
        <h1 class="header">Ski Free</h1>
        <canvas id="canvas" height="500"></canvas>
        <footer class="footer">
          <a href="https://en.wikipedia.org/wiki/SkiFree" target="_blank">Clone</a>
          recreated
          <br />by Sheri Zada
          <a href="https://github.com/sherzader/ski-free">code</a>
        </footer>
      </main>
      <aside class="right-panel">
        <img src="./assets/arrow-keys.gif" class="keys-img" alt="" />
        <ol class="keys-info">
          <li>Spacebar to Begin</li>
          <li>Arrow keys
            <br />to avoid crashing!</li>
        </ol>
      </aside>
    </div>

    <script type="text/javascript">
    const DIRECTIONS = {
      right: "right",
      left: "left",
      straight: "straight",
      jump: "jump",
      xcLeft: "xcLeft",
      xcRight: "xcRight",
    };
    const canvas = document.getElementById("canvas");
    const totalBorderWidth = 6;
    const headerWidth = 44;
    const footerWidth = 44;
    const setCanvasDimensions = () => {
      if (window.innerWidth <= 800) {
        canvas.width = window.innerWidth - totalBorderWidth;
      } else {
        canvas.width = window.innerWidth / 2 - totalBorderWidth;
      }
    }
    window.addEventListener("resize", setCanvasDimensions);
    setCanvasDimensions()
    const ctx = canvas.getContext("2d");
    const game = new SkiFree.Game(canvas.width, canvas.height);
    const gameView = new SkiFree.GameView(game, canvas);
    let gameStarted = false;
    let time = 0;
    const token = setInterval(() => {
      if (game.hasLoaded()) {
        game.draw(DIRECTIONS.straight);
        clearInterval(token);
      }
    }, 10);
  </script>
  </body>

</html>
